:root{
  --red:#800000; --red-d:#640000;
  --gold:#ffd700; --gold-soft:#f5c542;
  --cream:#fff8dc;

  /* ปรับขนาด/ความจางสัญลักษณ์หลัง “กระบอก” ได้จาก 2 ตัวนี้ */
  --emblem-size: min(90%, 360px);  /* ใหญ่ขึ้นได้ เช่น 420px */
  --emblem-opacity: .26;           /* 0–1 ยิ่งมากยิ่งชัด */
}

/* ===== พื้นหลังจีน ๆ + ฝุ่นทองระยิบ ===== */
html,body{height:100%}
body{
  margin:0; font-family:"TH Sarabun New","Sarabun",system-ui,sans-serif; color:var(--cream);
  background: radial-gradient(1100px 700px at 50% -10%, #b91c1c 0%, var(--red) 55%, var(--red-d) 100%);
  display:flex; align-items:flex-start; justify-content:center; padding:28px 12px 48px;
}
/* ฝุ่นทอง */
.bg-dust,.bg-dust::before,.bg-dust::after{
  position:fixed; inset:0; pointer-events:none; z-index:0; content:"";
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,215,0,.28) 40%, transparent 42%),
    radial-gradient(1.8px 1.8px at 70% 60%, rgba(255,215,0,.24) 40%, transparent 42%),
    radial-gradient(1.6px 1.6px at 40% 80%, rgba(255,215,0,.18) 40%, transparent 42%),
    radial-gradient(1.4px 1.4px at 85% 25%, rgba(255,215,0,.22) 40%, transparent 42%);
  animation:dust 30s linear infinite;
}
.bg-dust::before{ filter:blur(0.6px); opacity:.7; animation-duration:38s }
.bg-dust::after{ filter:blur(1px); opacity:.45; animation-duration:52s }
@keyframes dust{ to{ background-position: 300px -200px, -260px 220px, 180px -140px, -200px -160px; } }

/* ===== เวทีหลัก + กรอบจีน ===== */
.stage{
  width:min(900px,96vw); position:relative; z-index:1;
  padding:26px 18px 28px; border-radius:22px;
  background:linear-gradient(180deg,#990f0f 0%, #7a0a0a 55%, #650707 100%);
  border:3px solid var(--gold);
  box-shadow:0 22px 60px rgba(0,0,0,.55), inset 0 0 0 3px rgba(0,0,0,.2);
}
.stage::before{
  content:""; position:absolute; inset:10px; border-radius:16px;
  border:2px dashed rgba(255,215,0,.85); pointer-events:none;
}
/* มุมปมจีน */
.corner{position:absolute; width:40px; height:40px; transform:rotate(45deg); pointer-events:none; z-index:2}
.corner::before,.corner::after{content:""; position:absolute; inset:0; border:4px solid var(--gold); border-radius:6px}
.corner::after{inset:6px; border-color:var(--gold-soft)}
.corner.tl{top:-8px; left:-8px} .corner.tr{top:-8px; right:-8px}
.corner.bl{bottom:-8px; left:-8px} .corner.br{bottom:-8px; right:-8px}

/* ===== โคมแดงแกว่ง ===== */
.lanterns{position:absolute; inset:0; pointer-events:none; z-index:3}
.lantern{position:absolute; top:-6px; width:82px; height:92px; left:36px; transform-origin:50% -20px; animation:sway 5.8s ease-in-out infinite}
.lantern.l2{ left:auto; right:36px; animation-duration:6.6s; animation-delay:.6s }
.lantern::before{ content:""; position:absolute; left:50%; top:-24px; width:2px; height:28px; transform:translateX(-50%); background:linear-gradient(var(--gold),#a06a00); }
.lantern::after{ content:""; position:absolute; left:50%; bottom:-8px; transform:translateX(-50%); width:2px; height:16px; background:#a00606; box-shadow:0 10px 0 6px #ffb2b2 inset; }
.lantern i{ position:absolute; inset:0; display:block; border-radius:26px/30px; background:radial-gradient(120% 100% at 50% 40%, #ff7575 0%, #e10000 55%, #9b0000 100%); box-shadow:0 0 18px 6px rgba(255,140,140,.35), inset 0 -10px 16px rgba(0,0,0,.25); border:3px solid #5a0000; }
.lantern b{ position:absolute; left:50%; width:64px; height:10px; transform:translateX(-50%); background:linear-gradient(180deg,#ffe07a,#c98a00); border:1px solid #8b5d00; border-radius:8px }
.lantern b.top{top:-3px} .lantern b.bot{bottom:-3px}
@keyframes sway{ 0%,100%{ transform:rotate(-3.2deg) } 50%{ transform:rotate(3.2deg) } }

/* ===== ป้ายภาพ ===== */
.a01,.a02{ position:relative; width:460px; pointer-events:none; margin:0 auto }
.a01 img,.a02 img{ width:100%; display:block }
.a01 img{ margin-top:-222px } .a02 img{ margin-top:-472px }
.a01 .text,.a02 .text{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-weight:800; color:var(--gold); text-shadow:1px 2px 6px #000; text-align:center; width:90%; }
.a01 .text{ margin-top:-26px; font-size:28px } .a02 .text{ margin-top:-70px; font-size:21px }

/* === ตัวหนังสือทองเลื่อม === */
.gold-shimmer{
  background: linear-gradient(90deg,#8a5e00 0%,#ffd36b 20%,#fff8c6 35%,#ffd36b 50%,#8a5e00 80%);
  background-size: 200% 100%;
  -webkit-background-clip: text; background-clip: text;
  color: transparent; animation: goldSheen 3.2s linear infinite;
  text-shadow: 0 1px 0 #5e3f00, 0 2px 6px rgba(0,0,0,.45);
  filter: drop-shadow(0 0 4px rgba(255,215,0,.25));
}
@keyframes goldSheen{ 0%{background-position:0% 50%} 100%{background-position:200% 50%} }
@media (prefers-reduced-motion:reduce){ .gold-shimmer{ animation:none } }

/* เส้นคั่นลายเมฆ */
.divider{ height:14px; margin:12px auto 6px; width:min(560px,84%); position:relative; filter:drop-shadow(0 2px 2px #0005) }
.divider::before{
  content:""; position:absolute; inset:0;
  background:
    radial-gradient(10px 10px at 10px 50%, var(--gold) 60%, #0000 62%) left/40px 100% repeat-x,
    linear-gradient(var(--gold), var(--gold));
  -webkit-mask:linear-gradient(#000 0 0) center/100% 3px no-repeat; mask:linear-gradient(#000 0 0) center/100% 3px no-repeat;
  border-radius:999px;
}

/* ===== โซนกระบอก ===== */
.section{
  margin-top:-296px; border-radius:16px; padding:20px;
  background:linear-gradient(180deg,#8f1212 0%, #7e1010 100%);
  box-shadow:inset 0 0 0 2px rgba(255,215,0,.35), 0 10px 28px rgba(0,0,0,.35);
  position:relative; z-index:5;
}
.center{display:grid;place-items:center}
.row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
.hidden{display:none!important}

.tube-area{ position:relative; width:min(300px,90vw); height:clamp(260px,42vh,360px); display:flex; align-items:flex-end; justify-content:center; }

/* พื้นหลังสัญลักษณ์จาง ๆ หลัง “กระบอก” */
.tube-area::before{
  content:""; position:absolute; inset:0;
  background: center / var(--emblem-size) no-repeat url("images/ss.png");
  opacity: var(--emblem-opacity); filter: drop-shadow(0 2px 6px rgba(0,0,0,.25));
  pointer-events:none; z-index:0; width: 100%;
}
.tube-img{
  width:min(220px,70vw); height:auto; filter:drop-shadow(0 12px 24px rgba(0,0,0,.5));
  transform-origin:50% 12%; pointer-events:none; transition:transform .2s ease;
  position:relative; z-index:1;
}

/* ให้เอฟเฟกต์อยู่เหนือพื้นหลังด้วย */
.fx-burst, .coins{ position:absolute; inset:0; z-index:1; }

/* สั่นกระบอก */
.shake{ animation:shake 800ms cubic-bezier(.36,.07,.19,.97) both }
@keyframes shake{
  10%,90%{ transform:translateX(-1px) rotate(-.6deg) }
  20%,80%{ transform:translateX( 2px) rotate(.6deg) }
  30%,50%,70%{ transform:translateX(-4px) rotate(-1.2deg) }
  40%,60%{ transform:translateX( 4px) rotate(1.2deg) }
}

/* ข้อความ "เขย่าๆ" */
.shake-text{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%) translate(var(--dx,0),var(--dy,0)) scale(.9) rotate(var(--rot,0));
  color:var(--gold); font-weight:900; text-shadow:0 0 6px rgba(0,0,0,.7);
  opacity:0; white-space:nowrap; user-select:none; font-size:clamp(14px,2.6vw,18px);
}
.is-shaking .shake-text{ animation:burst var(--dur,820ms) var(--delay,0s) ease-in-out infinite }
@keyframes burst{0%{opacity:0}50%{opacity:1}100%{opacity:0}}

/* เหรียญทอง */
.coins{ pointer-events:none; overflow:hidden }
.coin{
  position:absolute; top:-20px; width:16px; height:16px; border-radius:50%;
  background:radial-gradient(90% 90% at 30% 30%, #fff6b1 0%, #ffd24f 55%, #be8d00 100%);
  box-shadow:0 0 6px 1px rgba(255,215,0,.6); animation:coinFall 1100ms ease-in forwards;
}
.coin::after{ content:""; position:absolute; inset:3px; border-radius:50%; box-shadow:inset 0 0 0 2px rgba(130,80,0,.55), inset 0 0 0 4px rgba(255,240,180,.4); }
@keyframes coinFall{ 0%{ transform:translateY(-20px) rotate(0turn); opacity:0 } 10%{ opacity:1 } 100%{ transform:translateY(360px) rotate(1.3turn); opacity:.9 } }

/* ปุ่มทอง */
button{
  appearance:none; border:0; cursor:pointer; padding:12px 22px; border-radius:14px; font-weight:700;
  background:linear-gradient(180deg,#ffe073,#f6b51a); color:#5c0000; font-size:16px;
  box-shadow:0 3px 0 #915f00 inset, 0 -2px 0 #fff3b4 inset, 0 4px 10px rgba(0,0,0,.35);
  transition:transform .06s,filter .2s,box-shadow .2s;
}
button:hover{ filter:brightness(1.05) }
button:active{ transform:translateY(1px); box-shadow:0 1px 0 #915f00 inset,0 -1px 0 #fff3b4 inset,0 3px 8px rgba(0,0,0,.35) }
.ghost{ background:transparent; color:var(--gold); border:2px solid var(--gold); box-shadow:none; text-shadow:0 1px 0 #000 }

.title{font-size:20px;font-weight:800;display:flex;gap:10px;align-items:center;color:var(--gold)}
.badge{font-size:14px;padding:4px 10px;border-radius:999px;font-weight:700;border:1px solid #0003}
.good{background:rgba(34,197,94,.15);color:#22c55e}
.mid{ background:rgba(245,158,11,.2);color:#f59e0b}
.bad{ background:rgba(239,68,68,.2);color:#ef4444}
.meaning{color:var(--cream);font-size:18px}
.advice{color:#fcd34d;font-size:16px}
footer{margin-top:10px;color:var(--gold);font-size:14px;text-align:center}

/* ป๊อปอัปคำเตือน */
#warnNotice{ position:fixed; top:50%; right:20px; transform:translateY(-50%); width:280px; z-index:9999; opacity:0; pointer-events:none; transition:opacity .5s ease }
#warnNotice.show{ opacity:1 }
#warnNotice img{ width:100%; display:block; border-radius:12px }
#warnNotice .text{ position:absolute; top:50%; left:50%; transform:translate(-50%,-101%); text-align:center; color:var(--gold); font-weight:bold; text-shadow:2px 2px 6px #000; font-size:13.1px; line-height:1.4 }

/* Responsive */
@media (max-width:520px){ .stage{ padding:18px 12px } .row button{ width:100%; max-width:340px } }
@media (prefers-reduced-motion:reduce){ .shake,.is-shaking .shake-text,.lantern,.bg-dust,.coins .coin{ animation:none!important } }
